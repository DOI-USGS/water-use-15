target_default: Viz

packages:
  - vizlab

sources:
  - scripts/fetch/s3_object.R
  - scripts/process/clean_county_boundaries.R
  - scripts/process/execute_shell_script.R
  - scripts/publish/s3_object.R

targets:
  
  # --- parameter --- #
  
  s3bucket:
    command: parameter(I('s3bucket'))
    depends: arguments_s3bucket
  
  # --- fetch --- #
  
  cache/IPUMS_NHGIS_counties.zip:
    command: fetch_s3_object(I("IPUMS_NHGIS_counties.zip"), "s3bucket", target_name)
  
  cache/conus_map_data.rds:
    command: fetch(I('conus_map_data'))
  depends: 
    - arguments_conus_map_data
  - vizlab/remake/scripts/conus_map_data.R
  - cache/viewbox.rds
  
  # --- process --- #
  
  cache/conus_map.geojson:
    command: process(I('conus_map_geojson'))
  depends: 
    - arguments_conus_map_geojson
  - vizlab/remake/scripts/conus_map_geojson.R
  - cache/conus_map_data.rds